import"core-js/modules/es.array.concat";import"core-js/modules/es.array.slice";import"core-js/modules/es.array.iterator";import"core-js/modules/es.object.to-string";import"core-js/modules/es.regexp.exec";import"core-js/modules/es.string.iterator";import"core-js/modules/es.string.split";import"core-js/modules/es.string.starts-with";import"core-js/modules/es.typed-array.uint8-array";import"core-js/modules/es.typed-array.copy-within";import"core-js/modules/es.typed-array.every";import"core-js/modules/es.typed-array.fill";import"core-js/modules/es.typed-array.filter";import"core-js/modules/es.typed-array.find";import"core-js/modules/es.typed-array.find-index";import"core-js/modules/es.typed-array.for-each";import"core-js/modules/es.typed-array.includes";import"core-js/modules/es.typed-array.index-of";import"core-js/modules/es.typed-array.iterator";import"core-js/modules/es.typed-array.join";import"core-js/modules/es.typed-array.last-index-of";import"core-js/modules/es.typed-array.map";import"core-js/modules/es.typed-array.reduce";import"core-js/modules/es.typed-array.reduce-right";import"core-js/modules/es.typed-array.reverse";import"core-js/modules/es.typed-array.set";import"core-js/modules/es.typed-array.slice";import"core-js/modules/es.typed-array.some";import"core-js/modules/es.typed-array.sort";import"core-js/modules/es.typed-array.subarray";import"core-js/modules/es.typed-array.to-locale-string";import"core-js/modules/es.typed-array.to-string";import"core-js/modules/web.dom-collections.iterator";import"core-js/modules/web.url";import"core-js/modules/es.array.includes";import"core-js/modules/es.array.index-of";import"core-js/modules/es.array.map";import"core-js/modules/es.regexp.to-string";import"core-js/modules/es.string.match";import"core-js/modules/es.string.replace";import"core-js/modules/es.array.join";import"core-js/modules/es.reflect.construct";import"core-js/modules/es.array.filter";import"core-js/modules/es.array.splice";import"core-js/modules/es.function.name";import"core-js/modules/es.object.assign";import"core-js/modules/es.promise";import"core-js/modules/es.array.reduce";import"core-js/modules/es.array.some";var e=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o};var t=function(t){if(Array.isArray(t))return e(t)};var r=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)};var o=function(t,r){if(t){if("string"==typeof t)return e(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,r):void 0}};var n=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")};var i=function(e){return t(e)||r(e)||o(e)||n()};function s(e){if(0===e.length)return e;return function t(r,o){return function(n){return r-1==0?e.apply(void 0,i(o).concat([n])):t(r-1,[].concat(i(o),[n]))}}(e.length,[])}function a(e){if(!e.length)return 0;for(var t=e.sort((function(e,t){return e-t})),r=1,o=1,n=1;n<t.length;n++)t[n-1]===t[n]?o++:(o>r&&(r=o),o=1);return r}function l(e){var t=!1,r=this,o=Array.prototype.slice.call(arguments);return o.shift(),function(){var n=Array.prototype.slice.call(arguments);t||(t=!0,requestAnimationFrame((function(){e.apply(r,[].concat(i(n),[o])),t=!1})))}}function c(){var e=document.documentElement.clientHeight,t=document.documentElement.clientWidth,r=window.getComputedStyle(document.body),o=window.getComputedStyle(document.documentElement);return"hidden"!==r.overflow&&"hidden"!==o.overflow&&(document.documentElement.scrollHeight>e||document.documentElement.scrollWidth>t)}function u(e){var t=window.getComputedStyle(e);return("scroll"===t.overflow||"auto"===t.overflow)&&(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)}function d(e,t){for(var r=0,o=-1,n=0,i=0;i<e.length;i++)if((r+=(o=e.charCodeAt(i))>=0&&o<=128?1:2)>2*t){n=i;break}return n>t-1?e.slice(0,n)+"...":e}function h(){var e=document.createElement("canvas").getContext("2d"),t=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}function m(e){var t=h(),r=window.getComputedStyle(e);return e.width=t*parseFloat(r.width),e.height=t*parseFloat(r.height),e.toDataURL()}function f(e){for(var t=atob(e.split(",")[1]),r=t.length,o=new Uint8Array(r),n=0;n<r;n++)o[n]=t.charCodeAt(n);return new Blob([o])}function p(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="";if(e.startsWith("blob:"))o=e;else if(r){var n=f(e);if(window.navigator.msSaveBlob){try{window.navigator.msSaveBlob(n,t)}catch(e){console.error(e)}return}o=URL.createObjectURL(n)}else o=e;var i=document.createElement("a");i.download=t,i.href=o,i.click(),i.remove(),URL.revokeObjectURL(o)}function v(e,t){if(!e||""===e)return"";var r=e;if("string"==typeof r){var o=r.match(/(\/Date\((\d+)\)\/)/);o&&o.length>=3&&(r=parseInt(o[2]))}if(!(r=new Date(r))||"Invalid Date"===r.toUTCString())return"";var n={M:r.getMonth()+1,d:r.getDate(),h:r.getHours(),m:r.getMinutes(),s:r.getSeconds(),q:Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};return t.replace(/([yMdhmsqS])+/g,(function(e,t){var o=n[t];return void 0!==o?(e.length>1&&(o=(o="0"+o).substr(o.length-2)),o):"y"===t?(r.getFullYear()+"").substr(4-e.length):e}))}function y(e){return e instanceof Date!=!1&&"Invalid Date"!==e.toString()}function g(e){return e%4==0&&e%100!=0||e%400==0}function w(e){return[0,2,4,6,7,9,11].includes(e)}function b(e){var t=e.getMonth(),r=e.getFullYear();return w(t)?31:1===t?g(r)?29:28:30}function x(e){var t=e;return"string"==typeof t&&(t=new Date(t)),t}function j(e,t){var r=x(e),o=x(t);return!(!y(r)||!y(o))&&r.getTime()===o.getTime()}function S(e){return{year:e.getFullYear(),month:e.getMonth(),date:e.getDate(),day:e.getDay(),hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),milliSeconds:e.getMilliseconds()}}function D(e,t,r){var o=x(e),n=x(t);if(!y(o)||!y(n))return!1;var i=["year","month","date","hours","minutes","seconds","milliSeconds"],s=i.indexOf(r);if(-1===s)return j(o,n);var a=S(o),l=S(n);if("day"===r)return a.day===l.day;for(var c=0;c<s+1;c++)if(a[i[c]]!==l[i[c]])return!1;return!0}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0,r=x(e);if(!y(r))return!1;var o=r.getFullYear(),n=r.getMonth(),i=r.getDate(),s=r.getDay()||7,a=864e5,l=new Date(o,n,i);if("day"===t)return[l,new Date(l.getTime()+a)];if("week"===t)return[new Date(l.getTime()-(s-1)*a),new Date(l.getTime()+(8-s)*a)];if("month"===t){var c=1,u="";return u=11===n?new Date(o+1,0,1):new Date(o,n+1,1),[new Date(o,n,c),u]}return"year"===t?[new Date(o,0,1),new Date(o+1,0,1)]:void 0}function L(e){for(var t=e.map((function(e){var t=new Date(e);return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()})).sort((function(e,t){return e-t})),r=1,o=1,n=1;n<t.length;n++)t[n]-t[n-1]==864e5?o++:(o>r&&(r=o),o=1);return r}function k(e){if(!/^#?[0-9A-Fa-f]{6}$/.test(e))return e;for(var t=e.replace("#","").match(/../g),r=0;r<3;r++)t[r]=parseInt(t[r],16);return"rbg(".concat(t.join(","),")")}function O(e){var t=e.match(/\d{1,3}/g);if(3!==t.length)return e;for(var r=[parseInt(t[0]).toString(16),parseInt(t[1]).toString(16),parseInt(t[2]).toString(16)],o=0;o<3;o++)1===r[o].length&&(r[o]="0"+r[o]);return"#"+r.join("")}function C(e,t){if("number"!=typeof t||t>1||t<0)return e;var r=k(e).match(/\d{1,3}/g);return r.length?(r.push(t),"rgba(".concat(r.join(", "),")")):void 0}function P(e,t){if("number"!=typeof t||t>1||t<0)return e;for(var r=k(e).match(/\d{1,3}/g),o=0;o<3;o++)r[o]=Math.floor(r[o]*(1-t));return"rgb(".concat(r.join(", "),")")}function T(e,t){if("number"!=typeof t||t>1||t<0)return e;for(var r=k(e).match(/\d{1,3}/g).map((function(e){return parseInt(e)})),o=0;o<3;o++)r[o]=Math.floor((255-r[o])*t+r[o]);return"rgb(".concat(r.join(", "),")")}var _=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function M(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var N=function(e,t,r){return t&&M(e.prototype,t),r&&M(e,r),e};var R=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};function A(e,t){return e(t={exports:{}},t.exports),t.exports}var H=A((function(e){function t(r,o){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(r,o)}e.exports=t}));var F=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)},W=A((function(e){function t(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(r)}e.exports=t}));var B=function(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?R(e):t},I=A((function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(r)}e.exports=t}));var Y=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},X=function(){function e(){_(this,e),Y(this,"onEvents",{}),Y(this,"index",-1),Y(this,"count",0)}return N(e,[{key:"on",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.onEvents[e]=this.onEvents[e]||[],this.onEvents[e].push({name:e,callback:t,once:r})}},{key:"off",value:function(e,t){var r=this;this.onEvents[e]&&this.onEvents[e].length&&(this.onEvents[e]=this.onEvents[e].filter((function(o,n){var i=!0;return o.callback===t&&(i=!1,n<=r.index&&e===r.name&&r.count++),i})))}},{key:"emit",value:function(e){if(this.onEvents[e]&&this.onEvents[e].length){var t=Array.prototype.slice.call(arguments).slice(1);this.name=e;for(var r=0;r<this.onEvents[e].length;r++){var o=this.onEvents[e][r];o.once&&(this.onEvents[e].splice(r,1),r--),this.index=r,o.callback.apply(o,i(t)),r-=this.count,this.count=0}this.count=0,this.index=-1}}}]),e}();function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=I(e);if(t){var n=I(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return B(this,r)}}var q=function(e){F(r,X);var t=U(r);function r(e){var o;return _(this,r),o=t.call(this),Y(R(o),"width",2e4),Y(R(o),"oldWidth",0),Y(R(o),"newWidth",0),Y(R(o),"oldHeight",0),Y(R(o),"newHeight",0),Y(R(o),"supportsPassive",!1),Y(R(o),"scroll",(function(){o.newWidth=parseFloat(window.getComputedStyle(o.el).width),o.newHeight=parseFloat(window.getComputedStyle(o.el).height),o.oldWidth===o.newWidth&&o.oldHeight===o.newHeight||(o.emit("dom-resize"),o.oldWidth=o.newWidth,o.oldHeight=o.newHeight),o.holderSmall.scrollTop=o.holderBig.scrollTop=o.width,o.holderSmall.scrollLeft=o.holderBig.scrollLeft=o.width})),o.el=e,o._init(),o}return N(r,[{key:"_init",value:function(){this.oldWidth=parseFloat(window.getComputedStyle(this.el).width),this.oldHeight=parseFloat(window.getComputedStyle(this.el).height),this.setSupportsPassive(),this.createNode()}},{key:"createNode",value:function(){var e=document.createElement("div");e.style="position: absolute;top:0;left: 0;bottom: 0;right: 0;overflow: hidden;visibility: hidden;z-index:-1",e.innerHTML='<div style="width:'.concat(this.width,"px;height:").concat(this.width,'px"></div>');var t=document.createElement("div");t.style="position: absolute;top:0;left: 0;bottom: 0;right: 0;overflow: hidden;visibility: hidden;z-index:-1",t.innerHTML='<div style="width:300%;height:300%"></div>',this.holderBig=e,this.holderSmall=t,this.el.appendChild(e),this.el.appendChild(t),t.scrollTop=this.width,t.scrollLeft=this.width,e.scrollTop=this.width,e.scrollLeft=this.width,e.addEventListener("scroll",this.scroll,!!this.supportsPassive&&{passive:!0},!1),t.addEventListener("scroll",this.scroll,!!this.supportsPassive&&{passive:!0},!1)}},{key:"setSupportsPassive",value:function(){var e=this;try{var t=Object.defineProperty({},"passive",{get:function(){return e.supportsPassive=!0,!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(e){console.error(e)}}},{key:"destroy",value:function(){this.holderBig.removeEventListener("scroll",this.scroll),this.holderSmall.removeEventListener("scroll",this.scroll),this.el.removeChild(this.holderBig),this.el.removeChild(this.holderSmall)}}]),r}(),z=function(){function e(t){var r=this;_(this,e),Y(this,"show",(function(e){var t=e.target;setTimeout((function(){Object.assign(t.style,{opacity:1,transition:"opacity 0.5s ease",visibility:"visible"}),t.addEventListener("transitionend",(function(){Object.assign(t.style,{transition:"initial"}),r.resolve&&r.resolve(),r.resolve=null}))}),300)})),this.el=t,t.addEventListener("load",this.showImg)}return N(e,[{key:"setSrc",value:function(e){var t=this;return new Promise((function(r){requestAnimationFrame((function(){Object.assign(t.el.style,{opacity:0,visibility:"hidden"}),requestAnimationFrame((function(){t.el.src=e}))})),t.resolve=r}))}}]),e}(),$=function(){function e(t,r,o){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(_(this,e),r<t)throw new Error("params error");this.lower=t,this.upper=r,this.loop=n,this.length=this.upper-this.lower+1,this.setCache(o||[])}return N(e,[{key:"setCache",value:function(e){var t=this;this.initCache=e,this.cache=e.concat(),this.outBoundsNum=this.initCache.reduce((function(e,r){return r<t.lower||r>t.upper?e+1:e}),0),this.cacheLimitLength=this.length+this.outBoundsNum}},{key:"do",value:function(){if(this.loop||this.cache.length!==this.cacheLimitLength){if(this.upper-this.lower==0)return this.lower;var e=Math.floor(Math.random()*this.length+this.lower);if(this.cache.length===this.cacheLimitLength){var t=this.cache[this.cache.length-1];if(e===t)return this.do();this.cache=this.initCache.concat()||[]}return this.cache.some((function(t){return t===e}))?this.do():(this.cache.push(e),e)}}}]),e}(),G=function(){function e(t,r,o){var n=this;_(this,e),Y(this,"el",null),Y(this,"prePoint",{x:0,y:0}),Y(this,"customData",{startx:0,starty:0,endx:0,endy:0,dx:0,dy:0,offsetx:0,offsety:0}),Y(this,"_start",(function(e){var t=0,r=0;if("mousedown"===e.type){if(0!==e.button)return;if(!n.checkNode(e.target))return void(n.canSlide=!1);n.canSlide=!0,e.preventDefault(),t=e.pageX,r=e.pageY}else t=e.targetTouches[0].pageX,r=e.targetTouches[0].pageY;Object.assign(n.customData,{startx:t,starty:r,endx:t,endy:r,dx:0,dy:0,offsetx:0,offsety:0}),n.prePoint={x:t,y:r},n.el.dispatchEvent(n.slidestart)})),Y(this,"_move",(function(e){var t=0,r=0;if("mousemove"===e.type){if(!n.canSlide)return;t=e.pageX,r=e.pageY}else t=e.targetTouches[0].pageX,r=e.targetTouches[0].pageY;var o=t-n.prePoint.x,i=r-n.prePoint.y,s=0,a=0;n.customData.offsetx+o>n.maxSlideDx?(o=n.maxSlideDx-n.customData.offsetx,s=n.maxSlideDx):n.customData.offsetx+o<-n.maxSlideDx?(o=-n.maxSlideDx-n.customData.offsetx,s=-n.maxSlideDx):s=t-n.customData.startx,n.customData.offsety+i>n.maxSlideDy?(i=n.maxSlideDy-n.customData.offsety,a=n.maxSlideDy):n.customData.offsety+i<-n.maxSlideDy?(i=-n.maxSlideDy-n.customData.offsety,a=-n.maxSlideDy):a=r-n.customData.starty,Object.assign(n.customData,{endx:t,endy:r,dx:o,dy:i,offsetx:s,offsety:a}),n.prePoint={x:t,y:r},n.el.dispatchEvent(n.slidemove)})),Y(this,"_end",(function(e){var t=0,r=0;if("mouseup"===e.type){if(!n.canSlide)return;t=e.pageX,r=e.pageY,n.canSlide=!1}else t=e.changedTouches[0].pageX,r=e.changedTouches[0].pageY;Object.assign(n.customData,{endx:t,endy:r}),n.el.dispatchEvent(n.slideend)})),this.el=t,this.maxSlideDx=r,this.maxSlideDy=o,this._init()}return N(e,[{key:"_init",value:function(){this.slidestart=new CustomEvent("slidestart",{detail:this.customData,bubbles:!0,cancelable:!0}),this.slidemove=new CustomEvent("slidemove",{detail:this.customData,bubbles:!0,cancelable:!0}),this.slideend=new CustomEvent("slideend",{detail:this.customData,bubbles:!0,cancelable:!0}),this.el.addEventListener("touchstart",this._start),this.el.addEventListener("touchmove",this._move),this.el.addEventListener("touchend",this._end),window.addEventListener("mousedown",this._start),window.addEventListener("mousemove",this._move),window.addEventListener("mouseup",this._end)}},{key:"checkNode",value:function(e){return!!e&&(e===this.el||this.checkNode(e.parentNode))}},{key:"setMaxSlideDx",value:function(e){this.maxSlideDx=e}},{key:"setMaxSlideDy",value:function(e){this.maxSlideDy=e}},{key:"destroy",value:function(){this.el.removeEventListener("touchstart",this._start),this.el.removeEventListener("touchmove",this._move),this.el.removeEventListener("touchend",this._end)}}]),e}();function J(e,t){var r=Object.assign({duration:1e4,gap:"",start:0,scrollOverflowed:!1},t);Object.assign(e.style,{whiteSpace:"nowrap"}),Object.assign(e.parentNode.style,{overflow:"hidden"});var o=e.parentNode.offsetWidth,n=e.offsetWidth,i=r.gap||o,s=-(n+i);if(Object.assign(e.parentNode.style,{overflow:""}),!(n<=o&&r.scrollOverflowed||0===o||0===n)){var a=document.createElement("div"),l=document.createElement("div"),c=document.createElement("div"),u=e.cloneNode(!0),d=e.cloneNode(!0),h=e.cloneNode(!0);l.appendChild(u),c.appendChild(d),a.appendChild(l),a.appendChild(c);for(;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);e.appendChild(a),Object.assign(l.style,{display:"inline-block",marginRight:i+"px",marginLeft:r.start+"px"}),Object.assign(c.style,{display:"inline-block"}),Object.assign(a.style,{display:"inline-block"}),Object.assign(e.style,{display:"inline-block",overflow:"hidden",width:o+"px"});var m=s/r.duration*10,f=-m,p=null,v=10,y=function e(){v=10,(f+=m)>s&&f<0?a.style.transform="translateX(".concat(f,"px)"):0===f?(a.style.transform="translateX(".concat(f,"px)"),v=2e3):(a.style.transform="translateX(".concat(s,"px)"),f=-m),p=setTimeout((function(){e()}),v)},g=function(){clearTimeout(p)},w=function(){y()};return e.addEventListener("mouseenter",g),e.addEventListener("mouseleave",w),y(),{destroy:function(){e.parentNode.appendChild(h),e.parentNode.removeChild(e),Object.assign(h.style,{whiteSpace:""}),clearTimeout(p),e.removeEventListener("mouseenter",g),e.removeEventListener("mouseleave",w)}}}Object.assign(e.style,{whiteSpace:""})}export{q as DomResize,X as Event,k as HexToRgb,z as LoadImg,$ as RandomSeed,O as RgbToHex,G as Slide,m as canvasToImg,u as checkNodeCanScroll,c as checkPageCanScroll,L as countMaxConsecutiveDate,a as countMaxDuplicateNumber,s as curry,d as cutText,P as darkenColor,v as dateFormatter,p as downloadImg,S as getFullDate,b as getMonthDays,E as getPeriod,h as getPixelRatio,w as isBigMonth,j as isEqualDate,D as isEqualDateFuzzy,g as isLeapYear,y as isValidDate,T as lightnessColor,J as marquee,l as throttle,x as toDate,C as toRgba};
